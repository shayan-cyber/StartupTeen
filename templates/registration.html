{% load static %}
{% load socialaccount %}

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <title>StartupTeen Registration</title>
  <link href="https://fonts.googleapis.com/css?family=Karla:400,700&display=swap" rel="stylesheet" />
  <!-- from landing page -->
  <link rel="stylesheet" href="{% static 'landing_page_assets/css/bootstrap.min.css' %}">
  <link rel="stylesheet" href="{% static 'landing_page_assets/css/animate.css' %}">
  <link rel="stylesheet" href="{% static 'landing_page_assets/css/LineIcons.css' %}">
  <link rel="stylesheet" href="{% static 'landing_page_assets/css/owl.carousel.css' %}">
  <link rel="stylesheet" href="{% static 'landing_page_assets/css/owl.theme.css' %}">
  <link rel="stylesheet" href="{% static 'landing_page_assets/css/magnific-popup.css' %}">
  <link rel="stylesheet" href="{% static 'landing_page_assets/css/nivo-lightbox.css' %}">
  <link rel="stylesheet" href="{% static 'landing_page_assets/css/main.css' %}">    
  <link rel="stylesheet" href="{% static 'landing_page_assets/css/responsive.css' %}">
  <!-- end -->
  <link rel="stylesheet" href="https://cdn.materialdesignicons.com/4.8.95/css/materialdesignicons.min.css" />
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" />
  <link rel="stylesheet" href="{% static 'assets/css/bd-wizard.css' %}" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Varela&display=swap" rel="stylesheet" />

  <link href="{% static 'vendor/fontawesome-free/css/all.min.css' %}" rel="stylesheet" type="text/css" />
</head>

<style>
  body {
    font-family: "Varela", sans-serif;
  }

  .container_loader {
    position: absolute;
    width: 200px;
    height: 200px;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    margin: auto;
  }

  .item {
    width: 100px;
    height: 100px;
    position: absolute;
  }

  .item-1 {
    background-color: #fa5667;
    top: 0;
    left: 0;
    z-index: 1;
    animation: item-1_move 1.8s cubic-bezier(0.6, 0.01, 0.4, 1) infinite;
  }

  .item-2 {
    background-color: #7a45e5;
    top: 0;
    right: 0;
    animation: item-2_move 1.8s cubic-bezier(0.6, 0.01, 0.4, 1) infinite;
  }

  .item-3 {
    background-color: #1b91f7;
    bottom: 0;
    right: 0;
    z-index: 1;
    animation: item-3_move 1.8s cubic-bezier(0.6, 0.01, 0.4, 1) infinite;
  }

  .item-4 {
    background-color: #fac24c;
    bottom: 0;
    left: 0;
    animation: item-4_move 1.8s cubic-bezier(0.6, 0.01, 0.4, 1) infinite;
  }

  @keyframes item-1_move {

    0%,
    100% {
      transform: translate(0, 0);
    }

    25% {
      transform: translate(0, 100px);
    }

    50% {
      transform: translate(100px, 100px);
    }

    75% {
      transform: translate(100px, 0);
    }
  }

  @keyframes item-2_move {

    0%,
    100% {
      transform: translate(0, 0);
    }

    25% {
      transform: translate(-100px, 0);
    }

    50% {
      transform: translate(-100px, 100px);
    }

    75% {
      transform: translate(0, 100px);
    }
  }

  @keyframes item-3_move {

    0%,
    100% {
      transform: translate(0, 0);
    }

    25% {
      transform: translate(0, -100px);
    }

    50% {
      transform: translate(-100px, -100px);
    }

    75% {
      transform: translate(-100px, 0);
    }
  }

  @keyframes item-4_move {

    0%,
    100% {
      transform: translate(0, 0);
    }

    25% {
      transform: translate(100px, 0);
    }

    50% {
      transform: translate(100px, -100px);
    }

    75% {
      transform: translate(0, -100px);
    }
  }

  .form-control {
    width: 100%;
    max-width: 100% !important;

  }

  .allauth_btn:hover {
    color: #00d69f !important;
  }
  .btn-singin{
      background: #7fc9fb;
    color: #fff;
    padding: 10px 23px;
    margin-left: 30px;
    box-shadow:0px 8px 9px 0px rgb(96 94 94 / 17%);
    }
</style>

<body>
  <!-- loader start -->

  <div class="container_loader">
    <div class="item item-1"></div>
    <div class="item item-2"></div>
    <div class="item item-3"></div>
    <div class="item item-4"></div>
  </div>

  <!-- loader end -->

  <header style="display: none" class="content mb-2" id="content">
    <nav style=" background: linear-gradient(95deg, #5533ff 40%, #25ddf5 100%);" class="navbar navbar-expand-md  fixed-top scrolling-navbar">
      <div class="container">
        <a href="index.html" class="navbar-brand"><img src="{% static 'landing_page_assets/img/logo.png' %}" alt=""></a>       
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
          <i class="lni-menu"></i>
        </button>
        <div class="collapse navbar-collapse" id="navbarCollapse">
          <ul class="navbar-nav mr-auto w-100 justify-content-end">
            <li class="nav-item">
              <a class="nav-link page-scroll" href="#home">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link page-scroll" href="#services">About</a>
            </li>  
            <li class="nav-item">
              <a class="nav-link page-scroll" href="#features">Services</a>
            </li>                            
                
            <li class="nav-item">
              <a class="nav-link page-scroll" href="#team">Team</a>
            </li> 
            <li class="nav-item">
              <a class="nav-link page-scroll" href="#blog">Blog</a>
            </li>  
            <li class="nav-item">
              <a class="nav-link page-scroll" href="#contact">Contact</a>
            </li> 
            
            <li class="nav-item">
              {% if request.user.is_authenticated %}

              <a class="btn btn-singin" href="{% url 'log_out' %}">Log Out</a>
                {% else %}
              
              <a class="btn btn-singin" href="{% url 'login_page' %}">Sign In</a>
              {% endif %}
            </li>
            {% if request.user.is_authenticated %}

            <li class="nav-item">
              <a href="{% url 'profile' request.user.username %}" class="nav-link">{{request.user.username}}</a>
            </li>
            <li class="nav-item">
              <a href="{% url 'profile' request.user.username %}">

                <img style="width:3rem; height:3rem; margin-left:1rem; margin-top:-0.3rem" class="rounded-circle" src="{{request.user.profile.image.url}}" alt="">

              </a>
              
            </li>
              
            {% endif %}
            
          </ul>
        </div>
      </div>
    </nav> 
    <br><br><br><br>
  </header>
  <main style="display: none !important" class="d-flex align-items-center content_main mt-5" id="content_main">
    <div class="container">

      

      <div style="display: none;" class="alert alert-warning alert-dismissible fade show" id="alert" role="alert">
         <strong class="message" id="message_text"></strong>
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
        
      
      <div id="wizard">
       {% if request.user.is_authenticated == False %}

       <h3>Step 1 Title</h3>
       <section>
         <!-- <h5  class="bd-wizard-step-title">Step 1</h5> -->
         <h2 style="font-size: 2rem;" class="section-heading">Enter your Account Details</h2>
       
           <div class="form-group">
             <!-- <label for="firstName" class="sr-only">First Name</label> -->
             <label for="name" class="form-label">Name</label>
             <input type="text" name="name" id="name" class="form-control" placeholder="Name" required />
           </div>
           <div class="form-group">
             <!-- <label for="lastName" class="sr-only">Last Name</label> -->
             <label for="username" class="form-label">Username</label>
             <input type="text" name="username" id="username" class="form-control" placeholder="UserName" required />
           </div>
 
           <div class="form-group">
             <label for="email" class="sr-only">Email Address</label>
             <label for="email" class="form-label">Email Address</label>
             <input type="email" name="email" id="email" class="form-control" placeholder="Email Address" required />
           </div>
           <div class="form-group">
             <label for="password" class="sr-only">Password</label>
             <label for="password" class="form-label">Password</label>
             <input type="password" name="password" id="password" class="form-control" placeholder="Password"
               required />
           </div>
           <div class="form-group">
             <label for="confirm_password" class="sr-only">Confirm Password</label>
             <label for="confirm_password" class="form-label">Confirm Password</label>
             <input type="password" name="confirm_password" id="confirm_password" class="form-control"
               placeholder="Confirm Password" required />
           </div>
 
           <div class="submit_btn form-group">
             <button onclick="signup()" style="background-color: #00d69f; border-color: #00d69f;" type="button"
               class="btn btn-success btn-sm btn-block">Sign Up</button>
           </div>

        
         

         <div class="allauth">
           <strong class="px-2" style="color: #00d69f">
             <h6>Or Sign In With</h6>
           </strong>

           <div class="row px-2">
             <a class="allauth_btn" style="color: black" href="{% provider_login_url 'google' %}">
               <i style="font-weight: 800; font-size: 2.5rem" class="fab fa-google p-2"></i></a>

             <a class="allauth_btn" style="color: black" href="{% provider_login_url 'github' %}">
               <i style="font-weight: 800; font-size: 2.5rem" class="fab fa-github p-2"></i></a>
           </div>
         </div>
       </section>
         
       {% endif %}
       {% if request.user.profile.type_of %}

       {% else %}

       <h3>Step 2 Title</h3>
        <section>
          <!-- <h5 class="bd-wizard-step-title">Step 2</h5> -->
          <h2 class="section-heading">Select account type</h2>
          <p>
            Lorem ipsum dolor sit amet consectetur adipisicing elit. Reiciendis eveniet ipsum omnis esse quidem eos
            distinctio ducimus totam, error vitae sapiente accusantium delectus officia obcaecati amet placeat
            consequuntur, tempora molestias.
          </p>
          <div class="purpose-radios-wrapper">
            <div class="purpose-radio">
              <input type="radio" name="purpose" id="branding" class="purpose-radio-input type_account" value="OWN"
                checked />
              <label for="branding" class="purpose-radio-label">
                <span class="label-icon">
                  <img src="{% static 'assets/images/icon_branding.svg' %}" alt="branding" class="label-icon-default" />
                  <img src="{% static 'assets/images/icon_branding_green.svg' %}" alt="branding"
                    class="label-icon-active" />
                </span>
                <span class="label-text">Startup</span>
              </label>
            </div>

            
            <div class="purpose-radio">
              <input type="radio" name="purpose" id="web-design" class="purpose-radio-input type_account" value="DEV" />
              <label for="web-design" class="purpose-radio-label">
                <span class="label-icon">
                  <img src="{% static 'assets/images/icon_web_design.svg' %}" alt="branding"
                    class="label-icon-default" />
                  <img src="{% static 'assets/images/icon_web_design_green.svg' %}" alt="branding"
                    class="label-icon-active" />
                </span>
                <span class="label-text">Developer</span>
              </label>
            </div>
          </div>
        </section>
        <h3>Step 3 Title</h3>
         
       {% endif %}

        

        
        <section>
          <!-- <h5 class="bd-wizard-step-title">Step 3</h5> -->
          <h2 class="section-heading mb-5">Review your Details</h2>
          <h6 class="font-weight-bold">Account type</h6>
          <p class="mb-4" id="business-type">Startup</p>
          <h6 class="font-weight-bold">Your Details</h6>
          <p class="mb-4">
            Name : <span id="enteredFirstName">{{request.user.username}}</span>
            <br>
            <!-- <span id="enteredLastName">Ji-Hun C</span> <br />
            Phone: <span id="enteredPhoneNumber">+230-582-6609</span> <br /> -->
            Email: <span id="enteredEmailAddress">{{request.user.email}}</span>
          </p>


        </section>
        {% if request.user.profile.type_of %}

        <a href="/" class="btn btn-success btn-lg">Home</a>
        {% endif %}
      </div>
    </div>
    <p style="display: none" id="token">{% csrf_token %}</p>

    <p id="user_auth" style="display: none">{{request.user.is_authenticated}}</p>
  
  </main>
  <script src="https://code.jquery.com/jquery-1.9.1.min.js"></script>
  <script>

     // csrf
     function getCookie(name) {
    let cookieValue = null;
    if (document.cookie && document.cookie !== '') {
        const cookies = document.cookie.split(';');
        for (let i = 0; i < cookies.length; i++) {
            const cookie = cookies[i].trim();
            // Does this cookie string begin with the name we want?
            if (cookie.substring(0, name.length + 1) === (name + '=')) {
                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                break;
            }
        }
    }
    return cookieValue;
}
const csrftoken = getCookie('csrftoken');

    $(window).load(function () {
      $(".container_loader").fadeOut(2000);
      var d = $(".actions a[href$='#finish']").click(approval)
      // console.log(d);

      setTimeout(function () {
        console.log("hello");
        document.getElementById("content").style.display = "block";
        document.getElementById("content_main").style.display = "block";
      }, 2000);
    });

      // submit





  </script>




  <script>
   




    function approval() {
      var approves = document.getElementsByClassName("type_account");
      console.log(approves.length);
      var approves_value = [];
      for (var i = 0; i < approves.length; i++) {
        if (approves[i].checked) {
          approves_value[i] = approves[i].value;
        }
      }
      console.log(approves_value);



      var us  =document.getElementById("user_auth").innerText
      if(us  == 'True'){
        console.log('User is Logged In, sending data..');
      var url = '/register/'
      // project = {{project.pk}}
      fetch(url, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'X-CSRFToken': csrftoken
        },
        body: JSON.stringify({ 'approves_value': approves_value, })
      })
        .then((resp) => {
          return resp.json()
        })
        .then((data) => {
          console.log(data);
          window.location.href = '/'
        })

      }else{
        alert("Plase Complete Registration First")
      }
      



    }

    // Signup

    function signup() {
      var name = document.getElementById("name").value;
      var username = document.getElementById("username").value;
      var email = document.getElementById("email").value;
      var password = document.getElementById("password").value;
      var confirm_password = document.getElementById("confirm_password").value;
      // console.log(document.getElementsByName("csrfmiddlewaretoken").value);

      console.log(name);
      console.log(username);
      console.log(email);
      console.log(password);
      console.log(confirm_password);
      
      console.log('User is Logged In, sending data..');
      var url = '/register_sign_up/'
      // project = {{project.pk}}

      if(username && password && confirm_password && email && name){
        fetch(url, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'X-CSRFToken': '{{ csrf_token }}'
        },
        body: JSON.stringify({ 'name': name, 'email': email, 'password': password , 'username':username, 'confirm_password':confirm_password})
      }).then((resp)=>{
        return resp.json()

      })
      .then((data) =>{
        // window.location.reload()
        if(data.message =='logged in'){

          window.location.reload();

        }else{

          document.getElementById("alert").style.display = "block"
        document.getElementById("message_text").innerText = data.message

        }
        
        
        
    
        

      })
        

      }else{
        alert("please complete all fields")
      }
      

      
    }



  </script>

  <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
    integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
    crossorigin="anonymous"></script>
  <script src="{% static 'assets/js/bd-jquery.steps.min.js' %}"></script>
  <script src="{% static 'assets/js/bd-wizard.js' %}"></script>
</body>

</html>